{% extends "base.html" %}
{% load test_answers %}
{% block content %}
<style>
    li:hover{
         background-color: #fafafa;
         cursor: pointer; 
    }
    
    li{
        font-family: 'Lato',Arial,sans-serif;
    }
    
    .badge-success {
        background-color: #468847;
    }
    
</style>
<div class="album text-muted">
    <div class="container">
        <h1 class="jumbotron-heading">Tests</h1>
        <div class="row">
            <ul class="list-group">
            {% for test in tests %}
                <li class="list-group-item">
                    <a style="text-decoration: none" href="{% url 'single_test' test.id %}">
                        {{ test }}
                    </a>
                    {% has_been_answered test as test_answered_by_current_user %}
                    <div class="text-right">
                        {% if test_answered_by_current_user %}
                            Answered: 
                            <span class="badge badge-success">
                                {{test_answered_by_current_user.correct_answers|length}}/
                                {{test_answered_by_current_user.test_unit_results|length}}
                            </span>
                        {% else %}
                            Not answered yet. 
                        {% endif %}
                    </div>
                </li>
            {% empty %}
            <h3>
                No tests created.
            </h3>
            {% endfor %}
            </ul>
        </div>
    </div>
</div>
{% endblock %}

{% block end %}
<script>
$("li").click(function(){
   window.location=$(this).find("a").attr("href"); 
   return false;
});
</script>
{% endblock %}