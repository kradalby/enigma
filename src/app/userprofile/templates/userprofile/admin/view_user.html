{% extends "base/admin/index.html" %}

{% load courses %}

{% block admincontent %}
<style>
    td, th {
        padding: 5px;
    }
    
    .red {
        color:red;
    }
</style>
<h1>
    User: {{ user }}
</h1>
<div class="row">
    <a href="{% url 'admin_list_groups_user_is_not_member_of' user.id %}" class="btn btn-primary btn-lg">Add to group</a>
    <a href="{% url 'admin_list_courses_user_is_not_attending' user.id %}" class="btn btn-primary btn-lg">Add to course</a>
    <a href="{% url 'admin_edit_user' user.id %}" class="btn btn-primary btn-lg">Edit user</a>
</div>

<br/>
<h2>
    Courses attending:
</h2>
<div class="row">
    <table>
        {% if user|courses_attending %}
            <tr>
                <th>Course name</th>
                <th>Unregister from course</th>
            </tr>
        {% endif %}
        {% for course in user|courses_attending %}
            <tr>
                <td>
                    <a href="{% url 'admin_view_course' course.id %}">
                        {{ course }}
                    </a>
                </td>
                <td>
                    <a href="#">
                        <span class="glyphicon glyphicon-remove red" aria-hidden="true"> Unregister</span>
                    </a>
                </td>
            </tr>
        {% empty %}
            <tr>
                <td>
                    This user is not attending any courses.
                </td>
            </tr>
        {% endfor %}
    </table>
</div>

<h2>
    Group memberships:
</h2>
<div class="row">
    <table>
        {% if groups %}
            <tr>
                <th>Group name</th>
                <th>Unregister from group</th>
            </tr>
        {% endif %}
        {% for group in groups %}
            <tr>
                <td>
                    <a href="{% url 'admin_view_group' group.id %}">
                        {{ group }}
                    </a>
                </td>
                <td>
                    <a href="{% url 'admin_unregister_user_from_group' group.id user.id %}">
                        <span class="glyphicon glyphicon-remove red" aria-hidden="true"> Unregister</span>
                    </a>
                </td>
            </tr>
        {% empty %}
            <tr>
                <td>
                    This user is not member of any groups.
                </td>
            </tr>
        {% endfor %}
    </table>
</div>
{% endblock %}